> 本文源自《大型多人在线游戏开发》第1.6节

John M. Olsen, Microsoft Corporation  
infix@xmission.com

本文介绍了怎样根据物品造成伤害或是治疗伤害的能力为其赋予适当的价值，并以此为基础展开讨论，从而让读者知道应该怎样为游戏经济体系中的大多数物品确定价值。

在生活中，几乎每件东西都有相应的价格。只要把这个简单的真理延伸到游戏中对生命值的应用中去，就可以极大地简化那些通常难以平衡的机制。在MMP游戏中，游戏开发人员必须知道金钱是怎样进出游戏世界的并对其加以控制，否则游戏中的经济体系会瞬间崩溃。

这篇文章假设某个游戏开发团队在设计一个虚幻游戏，但这里的概念同样适用于任何使用标准方式的游戏：在这些游戏中，玩家和非玩家角色(Non-Player computer-controlled Characters, NPC)的等级越高，他们的生命值和防御力也越高。本文讨论的所有物品都基于一个衡量货币的通用单位：硬币。本文的目标是寻找一个可编程的方式来确定在游戏设置中每个物品的价格，并应用于大量物品上。一旦计算出游戏中物品的相对价值，就可以任意决定一枚“硬币”所表示的实际单位。

为了使用这一系统，游戏设计人员必须作一些假设以确保这个转换关系在角色升级后仍然保持平衡。第一个假设是随着玩家在游戏中不断地升级，某个特定武器的攻击力不会有显著提升。降低初学者使用某种高级武器的能力是可以接受的，但是任何武器在被符合要求的玩家使用时，基本攻击力应该是一样的。

# 1 武器的价值
通常，在一个游戏中有很多方式可以造成伤害。有些武器只能使用一次，譬如说箭或魔法；有些物品可以有效地进行一定次数的攻击，随后就会消失或是需要重新充值；还有一些物品可以持续使用很长时间，它们会逐渐损坏。假设随着时间的推移，所有武器都会损坏。做此假设是因为游戏设计人员希望根据物品损坏前所能造成的所有伤害来决定其价格，而不只是把价格建立在其造成伤害的速度上。

现在，从一个简单的假设开始，假设一枚硬币等价于一点生命值。这个假设本身并不重要，在完成定价后，设计人员还可以根据需要对基础值进行调整。

如果某个物品可以使用一定的次数，那就简单地按比例增加其价格。假设一根魔杖可以使用5次，而不是像魔法卷轴那样只能使用一次，那么它的价格就是总的攻击力，也就是每次的攻击力乘以使用次数。根据表1-5中的数值，总的价格是750*5，也就是3750枚硬币。

为那些可以使用很长时间的物品（譬如说剑）定价则更为复杂。假设玩家购买了一把崭新的剑并持续使用，直到完全损坏。这时，游戏设计人员可以让这把剑的攻击力隆至最低，也可以让它折断从而不能继续使用，这完全取决于他们需要的数字是这把剑在它的有效期内究竟可以造成多少伤害。

是时候重申假设了。首先，这把剑在崭新的情况下可以造成1到15点的伤害，在完全损坏后仅可以造成1点的伤害。这样就可以得出它在有效期内的平均攻击力范围是从8到1。

表1-5：造成一次性伤害或是固定次数伤害的物品
描述 | 使用次数 | 总攻击力 | 硬币数
---|---|---|---
劣箭 | 1 | 1-5 | 3
标准箭 | 1 | 2-10 | 6
改良的箭 | 1 | 6-12 | 9
超强箭 | 1 | 50-100 | 75
地狱烈焰卷轴 | 1 | 750 | 750
地狱烈焰魔杖 | 5 | 3750 | 3750

假设这个武器的有效期是18000秒（5个小时）的战斗时间。这意味着玩家在武器需要修复前可以使用很长的时间。假设玩家把大约20%的时间花在战斗上，那么5小时的战斗时间相当于25小时的游戏时间。这段时间足够长，因此玩家不必频繁地往返于武器维修店。

如果这个武器每次攻击需要5秒的时间，那么它可以有效地进行3600次攻击。如果这个武器的攻击力随着时间线性地降低，那么可以简单地得出等式1-2.
```
价值 = 攻击次数 * (损坏后的平均攻击力 + (全新时的平均攻击力 - 损坏后的平均攻击力)/2)
等式1-2
```

计算出的结果就是图1-17中斜线以下的阴影区域。图中纵轴表示攻击力，横轴表示挥动次数。

在等式1-2中填入具体数字就得到等式1-3。由此可以得出这把剑的价值：
```
3600 * (1+(8-1)/2) = 16200 个硬币 
等式1-3
```

![图1-17表示期望伤害的区域](https://github.com/najoast/GameDesign/tree/master/images/图1-17表示期望伤害的区域.png)

再举一个例子，假设一种简单武器，譬如说青铜匕首。它不仅攻击力较低，有效期也很短，因此可以预计它的价格也会便宜很多。如果它在有效期中可以进行1000次攻击，攻击力在全新的时候是1到4，损坏后是1，这把匕首的价格如等式1-4所示。2.5表示全新时候的平均攻击力，不要和最大攻击力混为一谈。
```
1000 * (1+(2.5-1)/2) = 1750 个硬币
等式1-4
```

参照前面表1-5中箭的价格，可以知道一把匕首可以交换超过290支标准箭，或是大约23支超强箭。

这个等式还给出了这些物品损坏后对其进行修复的价格。因为修复价格直接与攻击力相对应，所以游戏设计人员就可以直接在武器损坏程序的基础上确定修复价格。如果武器损坏了50%，那么修复它的价格就是新武器价格的50%。如果游戏设计人员希望鼓励玩家尽早修复他们的武器，就应该使用非线性的比例，使得修复费用一开始增长较慢，在物品有效期的最后阶段加速。等式1-5中的函数使用了这种方法来计算物品修复价格：
```
修复成本 = 基本成本 * 损坏百分比的平方
等式1-5
```

再一次用损坏了50%的武器作为例子，使用这个非线性比例计算出来的费用将是购买一个新武器所需费用的25%。等式中的平方项可以被任意定义域和值域都是0%到100%的单调递增函数取代。图1-18对两种可行的函数进行了对比。

高质量武器以及那些有效期很长的武器价格应该更高，上述公式与这一想法非常一致。正如游戏设计人员所预期的，如果某种武器可以造成更大的伤害，其价格也会成比例增加。这样玩家就能够决定他们想要什么武器以及他们买得起什么武器。如果他们想要一个高攻击力的武器，又不愿意多花钱，就必须以牺牲持久度为代价去使用那些容易损坏，因而需要频繁修复的武器。

游戏的设计还需要让玩家觉得这一切都很有趣，如果修复过于频繁，玩家就会觉得很无趣；因此，必须对其进行大量的游戏测试来找到合适的平衡，从而正确地实现物品的使用和修复。

表1-6中所列出的武器都是使用上述方法计算的，注意最后两项，武器可以使用的次数和价格均匀地成比例增长。

# 2 治疗、防具和减轻伤害
上述数值方法同样可以用于修复伤害的物品上，譬如说治疗药水或医药箱。治疗效果的大小决定了物品的价格。如果治疗效果的大小是可变的，那么就需要基于平均值来计算价格，就像上面所讨论的具有可变攻击力的武器一样。

通过跟踪一些额外的信息，游戏的设计也可以在防具上使用这些方法。游戏设计人员需要知道的就是防具在需要修复前所能为玩家吸收或是转移的攻击力。直接把生命值的大小映射到硬币数就可以确定防具的价格。游戏的设计可以简单地把攻击力平均分配到每一件防具上去，也可以把受到的伤害计算在作为攻击目标的那件防具上。

防具修复也可以使用和武器修复相同的方式。修复可以恢复防具吸收伤害的能力，正如对武器的修复可以恢复他造成伤害的能力一样。

# 3 从NPC获得的战得品
既然怎样为物品定价的问题已经解决了，那么这些物品从哪里来呢？当然是作为战利品获得。那怎样决定玩家击败某个特定的NPC后应该获得多少战利品呢？

这里的基本规则是，战利品的平均价值应该略大于杀死这个NPC所需造成伤害的数量，加上这个怪物会对玩家造成的伤害点数，再加上玩家在防具和武器上的消耗。如果使用图1-18所示的非线性修复系数，任何战利品比例乘数都可以减少到接近于1。

战利品的基本数量取决于玩家杀死这个怪物的速度，既然考虑了概率的作用，那就可以做一个一般化的假设：玩家造成的伤害约等于怪物造成的伤害。防具和魔法保护也会对数据产生影响，但是他们的效果有可能会被其他因素所抵消。基本的计算如等式1-6所示。为了让这些等式的结果对玩家有利，游戏设计不对战利品的参考价值进行调整。
```
战利品参考价值 = (玩家武器的损坏 + 玩家防具的损坏)
等式1-6
```

假设从统计角度来看玩家武器的损坏约等于玩家防具的损坏，等式1-7就可以用来对其进行简化。
```
战利品价值 = 2*玩家武器的损坏
等式1-7
```

总损坏量决定了战利品参考价值，也就是每个怪物平均会带多少战利品。从另一个角度来看，如果知道了他可以给出什么样的战利品以及它所使用的防具，游戏设计人员就可以确定其生命值是多少，等式1-8，可以用来求解生命值。
```
玩家武器的损坏 = 战利品价值 / 2
等式1-8
```

玩家武器的损坏源于对NPC造成的伤害，以及对NPC防具造成的损坏。因此，武器的损坏应该是这两个值的和，如等式1-9所示。
```
玩家武器的损坏 = NPC受到的伤害 + NPC防具的损坏
等式1-9
```

再一次对战得品参考价值进行求解，得到等式1-10。
```
战利品价值 = 2 * (NPC受到的伤害 + NPC防具的损坏)
等式1-10
```

譬如说，假设没有防具的兽人被击败后，有50%的可能性会掉出一根棍子，其战利品参考价值是750个硬币，而还有50%的可能性不会掉出任何战利品。如果这根棍子每次都已经损坏了50%（使用简单的线性比例），等式1-11中的战利品价值就是新棍子价格的4分之1。在对战利品参考价值进行调整时，必须同时考虑概率以及损坏量，因为对平均情况也要进行处理。
```
战利品价值 = 750 * 0.5 * 0.5 = 187.5
等式1-11
```
假设兽人没有防具，那么所有的伤害直接作用于生命值之上。在等式1-8中填入这些数字得到了等式1-12，这个结果说明了这场战斗会给玩家的武器带来多大的损坏。因为这些损坏都是为了对NPC造成伤害，它可以用来计算NPC的最大生命值。
```
玩家武器的损坏 = 187.5 / 2 = 93.75
等式1-12
```

以这个为基础，增加战利品或是减少怪物的生命值，可以改变玩家在游戏中致富的速度。最初时可以把1作为基本比例因子，然后根据游戏测试的需要进行调整。

如果一个兽人所穿的防具可以吸收20%的伤害（15点生命值），那么其战利品的参考价值就应该增加30个硬币，这是因为玩家在攻击它时不仅需要对它造成额外的伤害，并且由于它的生命期延长了，它在死前也会对玩家造成更多的伤害。

有时游戏设计人员可能会希望需要付出很大的代价才能杀死某些特定的NPC，它们的战利品参考价值将远远低于根据他们的生命值和防具等级所计算出的值，当然，这个特定的怪物会偶尔掉下一个罕见的物品来补偿玩家。有时游戏设计人员会希望一个NPC可以掉出比其他NPC多得多的战利品，从而使玩家群起而攻之，这样做可以鼓励玩家去一些比较偏僻的地方。

整体理解平均情况和统计理论在这里很有用，如果要让一个容易杀死的怪物掉下很昂贵的战利品，就必须调节掉下战利品的概率使得平均数接近这个NPC的战利品参考价值，譬如说，如果游戏设计为一只等级很低的老鼠会掉下一颗昂贵的宝石，就必须让这种情况非常罕见。

# 4 制造业


# 5 无关物品

# 6 检验

# 7 总结
















