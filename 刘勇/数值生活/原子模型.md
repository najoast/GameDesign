本文是根据刘勇老师的视频教程总结的文字版内容，方便查阅。

原视频链接：
* [数值的结构：原子模型(上)](https://www.iqiyi.com/v_19rrbubd9w.html)
* [数值的结构：原子模型(中)](https://www.iqiyi.com/v_19rrbuc4wc.html)
* [数值的结构：原子模型(下)](https://www.iqiyi.com/v_19rrbue0rk.html)

# 原子模型的公式
```
源数据 * 乘法修正 + 加法修正 = 结果
```

比如源数据是 HP=100点，乘法修正=上升30%，加法修正=加300点，那么

```
修正后的HP = 100 * (1+30%) + 300 = 430
```

# 多级原子模型
多级原子模型表示的是，当有多种加成时，计算是一级一级的往下进行的，上一级的计算结果，做为下一级的源。

```
初始源数据 * 1级乘法修正 + 1级加法修正 = 1级结果
1级结果 * 2级乘法修正 + 2级加法修正 = 2级结果
2级结果 * 3级乘法修正 + 3级加法修正 = 3级结果
...
```

还是拿HP举例，在一个游戏中，HP至少分三级。
### 第一级：基础HP(Lv1 HP)
* 源数据：是等级提供的，每一级提供的是一个原始的HP
* 乘法修正：种族天赋加成，比如魔兽世界里战士这里有250%的加成，就是在这个位置加的
* 加法修正：转职、被动技能、宝物加成等等

### 第二级：标准HP(Lv2 HP)
* 源数据：基础HP(Lv1 HP)
* 乘法修正：一般没有，对基础HP进行修正是在第一级，对最终HP修正是在第三级，第二级一般没有乘修，刘老师说这里有的话会让游戏变的很复杂。
* 加法修正：装备HP

因为这一级里没有乘法修正，所以最终结果变成了：

```
2级HP = 基础HP + 装备HP
```

这一步刘老师称为：`基础HP` 和 `装备HP` 两方会师。

##### 关于装备HP的说明
装备HP，实际上也是加成后的，装备有它自己的加成体系，也有原子模型，这里是计算后的结果。
```
装备HP = 源HP * 乘修 + 加修
```

比如有个帽子是这样的：
* 【正阳冠】
* 【装备基础属性】HP +500
* 【关键字】HP +30%
* 【生命宝石】HP +500

关键字对HP的加成，只是对装备本身的HP进行加成的，不会影响角色的HP。  
那这个帽子提供的HP = 500*(1+30%) + 500 = 1300

如果有多件装备都提供HP，这里应该是所有装备按自己的原子模型算出结果后加在一起的。  

这里有个知识点：就是装备关键字上描述的乘法修正，都是对装备自身数值进行修正的，不能影响基础HP，也不能影响其他装备，这样的加成是封闭的，影响不会出这件装备，数值也就比较稳定、可控。


### 第三级：实际HP(Lv3 HP)
* 源数据：标准HP (Lv2 HP)
* 乘法修正：装备关键字
* 加法修正：装备宝石

说明一下，在第二级里我们说过装备关键字和宝石加成是加在装备身上的，有些游戏确实是这么做的，刘老师举例魔兽世界好像是这样做的。但他个人更习惯把装备关键字和宝石的加成放到第三步里，不是直接作用于装备。

#### 刘老师的做法
1. 第一级修正控制的精确度较小，第三级修正控制的精确度较大，有两个乘修和加修就足够了。
2. 装备上的各种数据全部相加在一起，在第二步里做为加法修正加到结果里。不喜欢针对装备再做各种各样的修正。
3. 装备上的关键字和宝石加成，放到第三步去计算。
4. 这样一来，形成了一个核心数据源，就是第一步的源，刘老师叫它“太阳”。

### 第四级：最终HP (Lv4 HP)
* 源数据：实际HP (Lv3 HP)
* 乘法修正：Buff 加成
* 加法修正：夫妻关系加成、帮派加成等关系加成

第四级是用来处理各种临时修正的，包括Buff、各种关系加成、帮派加成等等。

本质上来说，各种关系加成也都是Buff加成，所以第四级里基本都是Buff加成，是一种不太稳定的加成，随时都可能消失。

Lv3 HP 是一个比较稳定的数据，Lv4 不是。 

> 最终HP虽然是实际游戏中表现出来的数值，但它并不稳定，不适合做数值基本计算。


# 关于调数值时的位置
由上面计算HP的四步来看，不同的加成位置不同，对结果的影响也是不同的，第1步里的源+1点，经过层层修正，最终也许变成了100点，而第4步里夫妻加成+1点，就是加了1点。

所以在调数值时，一定要看好是想调在哪。

> 原子模型这样一层一层的下来，每一个数据都有自己的位置，调哪个数据，产生什么结果，必须和期望结果是100%吻合的。  
> 在数据平衡中，如果没有好的设计习惯，结果可能和你想要的天差地别。  
> 这就是失控了，控制 是数据平衡的第一步，也是最重要的一步。  

# 为什么叫原子模型？
刘老师原话：我愿意！（面目狰狞）

其实没什么原因，你爱叫别的也可以，但既然是刘老师总结出来的，那我们就尊重一下，就叫原子模型，这名字也挺好的。
